# zkSync Era基础知识

## 先决条件

如果你不熟悉rollups，在学习zkSync之前，你应该阅读[rollups basics](./rollups.md)并阅读ZK rollups和Optimistic rollups。

## 介绍

**zkSync**是一个[ZKRollup](./rollups.md#what-are-zk-rollups)，是一个无需信任的协议，通过加密的有效性证明，
在以太坊上提供可扩容和低成本的交易。
在zkSync中，计算是在链外进行的，大多数数据也是在链外存储的。由于所有交易都是在以太坊主链上证明的，所以在主链上，用户享有与以太坊相同的安全级别。

zkSync Era的外观和感受与以太坊相似，但费用更低，就像在以太坊上一样。智能合约是用Solidity/Vyper编写的，可以使用与其他EVM兼容链相同的客户端来调用。

你不需要在使用前注册一个单独的私钥；zkSync支持现有的Ethereum钱包，开箱即用。
目前，zkSync仅由zkSync团队的服务器运行和操作，因此是集中式的。然而，这将很快过渡到一个去中心化的系统。

## zkSync 概述

<!---
这两部分将能够相互配合，并被放在一起。这意味着，zkRollup方面的合约和账户将
能够毫无问题地与zkPorter方面的账户一起工作，反之亦然。
-->

一般的 Rollup 工作流程如下。

- 用户可以接收、存入和转移资产给对方。
- 用户可以将其控制下的资产提取到L1地址。

Rollup操作需要操作者的协助，他将交易打包在一起，计算出正确状态转换的零知识证明，并通过与 Rollup 合约的交互影响状态转换。
为了理解这个设计，我们需要研究一下zkSync Rollup交易是如何工作的。

zkSync操作分为 Rollup交易（由Rollup账户打包内部发起）和优先级操作（由以太坊账户在主链上发起）。

zkSync Rollup操作的过程如下。

- 一个用户创建一个交易或一个优先操作。
- 在处理该请求后，操作员创建一个打包操作并将其添加到区块中。
- 一旦区块完成，操作员将其作为区块承诺提交给zkSync智能合约。
- 区块的证明被提交给zkSync智能合约作为区块验证。如果验证成功，新的状态被认为是最终的。

此外，在zkSync上，每个L2区块将通过以下四个阶段进行，直到最终完成。

- `Pending`：运营商收到该交易，但还没有被处理。
- `Processed`: 该交易被操作员处理，并被确认包含在下一个区块中。
- `Committed`：这表明这个区块的交易数据已经在以太坊上发布。它并不证明它已经以有效的方式执行，但它确保了区块数据的可用性。
- `Finalized`：这表明交易的SNARK有效性证明已经提交并由智能合约验证。在这一步之后，该交易被认为是最终的。

在当前阶段，交易从 "已处理 "到 "最终完成 "的通常时间是几个小时。

请注意，为了方便开发者，我们通常将 "已处理 "和 "已提交 "状态作为一个单一的阶段，称为 "已提交"，因为从UX/DexEx的角度来看，它们没有任何区别。

### zkSync 的状况。

当前版本的zkSync Era解决了以太坊上大多数应用程序的需求，随着更多的功能计划很快发布，zkSync Era将为开发人员提供一个设计空间，以尝试今天在以太坊上无法实现的应用。通过这个版本，我们支持以下功能。

- 对ECDSA签名的原生支持。与第一个版本的zkSync和大多数ZK Rollup不同，注册用户的私钥不需要特殊操作。任何账户都可以在 L2 中用于 L1 的相同私钥进行管理。
- Solidity 0.8.x 支持。部署您现有的代码库，几乎不需要任何改变。
- 除了小的例外，我们的Web3 API与Ethereum完全兼容。这允许与现有的索引器、探索器等无缝整合。
- 支持Ethereum单位。ZkSync通过预编译原生支持`keccak256`、`sha256`和`ecrecover`。
- Hardhat插件。使得在zkSync上测试和开发智能合约变得容易。
- L1 → L2智能合约信息传递。允许开发人员将数据从Ethereum传递到zkSync上的智能合约，提供运行各种智能合约所需的信息。

一些功能不包括在我们目前的测试网中，我们希望在未来的升级中实现，这包括。

- zkPorter：最大和最重要的功能之一，zkPorter将允许用户选择zkRollup账户，其特点是最高的安全性和比以太坊减少20倍的费用，或zkPorter账户，其特点是在不同的安全模式（比侧链高得多）下，交易费用稳定，只有几美分。zkPorter和zkRollup账户都将能够在引擎盖下一起无缝互动。

## zkSync的比较

zkSync[在安全性和可用性方面在现有的二级扩容解决方案中非常突出](https://blog.matter-labs.io/evaluating-ethereum-l2-scaling-solutions-a-comparison-framework-b6b2f410f955)。
由于结合了最先进的密码学和链上数据的可用性，ZK rollups（zkSync的核心网络）是唯一的二级扩容解决方案，它不需要任何操作活动来保证资金安全。
例如，用户可以离线，当他们回来时仍然能够安全地提取他们的资产，即使ZKRollup验证器不再存在。

## zkSync的特点

- ETH和ERC20代币转移，在L1上即时确认并快速完成。
- 交易费用对于ERC20代币和ETH转账的主网成本来说是非常低的。
- 对现有以太坊地址（包括智能合约）的支付可以方便地用被转移的代币支付。

## zkSync Era的亮点

- 类似主网的安全性，对第三方的零依赖性。
- 无许可的EVM兼容的智能合约。
- 标准的Web3 API。
- 保留EVM的关键功能，如智能合约的可组合性。
- 引入新的功能，如账户的抽象化。

## 如何开始？

- 首先在[quickstart section](.../building-on-zksync/hello-world.md)中构建一个dApp。
- 参见[重要链接](.../troubleshooting/important-links.md)页面中关于RPC节点、钱包和区块资源管理器的信息。
